language: node_js

install:
  - npm install -g codecov

services:
  - docker

node_js:
  - node

before_script:
  - chmod +x wait-for-it.sh
  - npm run build

script:
  - docker-compose -f docker-compose.yml -f docker-compose.coveralls.yml up --abort-on-container-exit --exit-code-from test

after_success:
  - codecov
